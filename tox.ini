[tox]
envlist = py310,py311,py312

[testenv]
deps =
    pytest
    parameterized
    coverage
    mypy: mypy
commands =
    coverage run --source=. --omit="**/tmp/**,./tmp/**/*" -m pytest -v {posargs}
    coverage report -m
    coverage xml
    mypy: mypy agentstack
setenv = 
    AGENTSTACK_TELEMETRY_OPT_OUT = 1
    AGENTSTACK_UPDATE_DISABLE = 1

[coverage:run]
branch = True
source = .
omit =
    **/tmp/**
    ./tmp/**/*

[coverage:report]
omit =
    **/tmp/**
    ./tmp/**/*
