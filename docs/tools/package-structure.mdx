
## Tool Configuration
Each tool gets a directory inside `agentstack/_tools/<tool_name>` where the tool's 
source code and configuration will be stored.

The directory should contain the following files:

`config.json`
-------------
This contains the configuration for the tool for use by AgentStack, including
metadata, dependencies, configuration & functions exposed by the tool.

`__init__.py`
---------
Python package which contains the framework-agnostic tool implementation. Tools 
are simple packages which expose functions; when a tool is loaded into a user's 
project, it will be wrapped in the framework-specific tool format by AgentStack. 


`config.json` Format
--------------------

### `name` (string) [required]
The name of the tool in snake_case. This is used to identify the tool in the system.

### `category` (string) [required]
The category of the tool. This is used to group tools together in the CLI.

### `url` (string) [optional]
The URL of the tool's repository. This is provided to the user to allow them to 
learn more about the tool. 

### `cta` (string) [optional]
String to print in the terminal when the tool is installed that provides a call to action.

### `env` (list[dict(str, Any)]) [optional]
Definitions for environment variables that will be appended to the local `.env` file.
This is a list of key-value pairs ie. `[{"ENV_VAR": "value"}, ...]`.
In cases where the user is expected to provide their own information, the value is
set to `null` which adds it to the project's `.env` file as a comment. 

### `dependencies` (list[str]) [optional]
List of dependencies that will be installed in the user's project. It is 
encouraged that versions are specified, which use the `package>=version` format.

### `tools` (list[dict[str, dict]]) [required]
List of public functions that are exposed by the tool as keys and permissions as
a dictionary. 

#### `tools.<tool_name>.actions` (list['read', 'write', 'execute']) [required]
At a minimum, each tool must have a single action of `read`, `write`, or `execute`.

```json
  "tools": {
    "analyze_image": {
      "actions": ["read"]
    }
  }
```

#### `tools.<tool_name>.*` (str) [optional]
You can also pass additional parameters to be made available as permissions to 
the tool. These can be any valid JSON value. 

```json
  "tools": {
    "analyze_image": {
      "actions": ["read"], 
      "allow_http": true, 
      "allowed_dirs": ["*"]
    }
  }
```

Permissions in Tool Implementation
----------------------------------

In the tool implementation, you can access the `actions` and other parameters
using `agentstack.tools.get_permissions(<function>)`.

```python
def analyze_image(path: str) -> str:
    ...
    permissions = tools.get_permissions(analyze_image)
    if not permissions.READ:
        return "User has not granted read permission."

    if not permissions.allow_http:
        return "User has not granted permission to access the internet."
    ...
```